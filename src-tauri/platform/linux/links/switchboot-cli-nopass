#!/bin/bash
# Symlink to switchboot used by polkit without authentication.
# Only allow the first argument to be one of the whitelisted subcommands.

cmd="$1"

case "$cmd" in
	set-boot-next|set-boot-fw)
		# forward the full argv to the real binary
		exec /usr/bin/switchboot --cli "$@"
		;;
	*)
		printf 'Unauthorized subcommand: %s\n' "${cmd:-<empty>}" >&2
		exit 1
		;;
esac
